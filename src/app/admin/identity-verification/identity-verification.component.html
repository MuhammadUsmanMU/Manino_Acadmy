<div class="manage-pages-container">
  <div class="pages-table">
    <div class="table-header">
      <h3>All Identity Verification Requests ({{ filteredUsers.length }})</h3>
      <div class="filters">
        <!-- Sort Dropdown -->
        <div class="custom-dropdown" (click)="toggleSortDropdown()">
          <span>{{ selectedSort || 'Sort By' }}</span>
          <i class="fa-solid fa-caret-down"></i>
          <ul *ngIf="showSortDropdown" class="dropdown-options">
            <li (click)="selectSort('Asc')">Asc</li>
            <li (click)="selectSort('Desc')">Desc</li>
          </ul>
        </div>

        <!-- Limit Dropdown (Verified / Non-verified / All users) -->
        <div class="custom-dropdown" (click)="toggleLimitDropdown()">
          <span>
            {{
              selectedLimit === 10
                ? 'Non verified users'
                : selectedLimit === 20
                ? 'Verified users'
                : selectedLimit === 30
                ? 'All users'
                : 'Users'
            }}
          </span>
          <i class="fa-solid fa-caret-down"></i>
          <ul *ngIf="showLimitDropdown" class="dropdown-options">
            <li (click)="selectLimit(10)">Non verified users</li>
            <li (click)="selectLimit(20)">Verified users</li>
            <li (click)="selectLimit(30)">All users</li>
          </ul>
        </div>

        <!-- Search -->
        <div class="search">
          <i class="fa-solid fa-magnifying-glass"></i>
          <input
            type="text"
            placeholder="Search"
            [(ngModel)]="searchTerm"
          />
        </div>
      </div>
    </div>

    <div class="table-responsive">
      <table>
        <thead>
          <tr class="head">
            <th>#</th>
            <th>Name</th>
            <th>Email/Phone</th>
            <th>Created Date</th>
            <th>Role</th>
            <th>Email Verification</th>
            <th>Status</th>
            <th>Identity Verification</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of filteredTable" class="data">
            <td>{{ item.id }}</td>
            <td><img [src]="item.img" alt=""> {{ item.name }}</td>
            <td>{{ item.email }}<br>{{ item.phone }}</td>
            <td>{{ item.created }}</td>
            <td>{{ item.role }}</td>
            <td>
              <span class="tag"
                [ngStyle]="{
                  'color':
                    item.emailVarification.toLowerCase() === 'verified'
                      ? 'rgb(54 55 54)'
                      : 'rgb(192 182 182)'
                }">
                <i class="fa-solid fa-envelope-circle-check"></i>
                {{ item.emailVarification.toUpperCase() }}
              </span>
            </td>

            <td>
              <span class="tag">
                <span
                  class="dot"
                  [ngStyle]="{
                    'background':
                      item.Status.toLowerCase() === 'active'
                        ? '#28a745'
                        : '#d87e47'
                  }">
                </span>
                {{ item.Status.toUpperCase() }}
              </span>
            </td>

            <td>
              <span class="tag">
                <span
                  class="dot"
                  [ngStyle]="{
                    'background':
                      item.identity.toLowerCase() === 'verified'
                        ? '#28a745'
                        : '#d87e47'
                  }">
                </span>
                {{ item.identity.toUpperCase() }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
